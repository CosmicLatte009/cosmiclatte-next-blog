---
title: '[JavaScript] 변수'
date: '2023-03-09'
tags: ['JavaScript', 'ES6', '변수']
draft: false
summary: '호이스팅, 렉시컬 환경, var의 단점, TDZ'
---

# 1. 변수와 호이스팅

## 변수(Variable)

하나의 값을 저장하기 위해 확보한 메모리 공간 자체.

## 식별자(Identifier)

**메모리 공간을 식별하기 위해 붙인 이름**.  
즉, 변수명이다.  
변수명은 값이 아니라 메모리 주소를 기억한다.

## 변수 선언

변수 선언은 곧 변수를 생성하는 것.  
값을 저장하기 위해 메모리 공간을 확보하고,  
변수 이름과 확보된 메모리 공간의 주소를 연결해서 값을 저장할 수 있도록 준비하는 것을 말한다.

## 호이스팅

선언문이 위로 끌어올려진 듯한 현상.  
**정확히는 변수의 선언과 초기화를 분리한 후, 선언만 코드의 최상단으로 옮기는 것이다.**  
변수 선언 뿐만 아니라 모든 선언문은 어디에 위치해 있건  
**자바스크립트 엔진에 의해 다른 코드보다 먼저 실행된다.**  
이 때 실행된다는건 런타임 이전에 소스코드 평가 과정에서 **식별자가 스코프에 등록되는 것**을 뜻한다.

---

# 2. 변수를 관리하는 저장소

## 렉시컬 환경

식별자와 스코프는 렉시컬 환경이라는 자료구조에서 관리한다.  
`{key: 값}` 객체 형태의 스코프를 생성하여  
key에 식별자를 등록하고 식별자 key에 바인딩된 값과 같이 관리한다.

#### 환경 레코드

식별자에 바인딩된 값을 관리하는 컴포넌트 (저장소)

#### 외부 렉시컬 환경에 대한 참조

상위 코드의 렉시컬 환경(= 상위 스코프)를 가리키는 컴포넌트.  
이를 통해 스코프 체인을 구현한다.

![lexical](https://user-images.githubusercontent.com/87015026/223717794-05b8d6ad-297f-4ca0-b7c7-463be63980c0.png)

---

# 3. 변수의 종류 (var, let, const)

기존 var의 단점을 보완하기 위해 ES6에서 let과 const를 도입했다.

## var let const 변수 특징 차이

#### 1. 변수 유효 시점의 차이

- var는 변수 선언 단계 이전에 접근 가능.
- let, const는 변수는 초기화 단계 수행 전에는 접근 불가.

> let과 const는 var과 달리 선언(호이스팅) 시 변수가 자동으로 초기화되지 않으므로 초기화 단계 수행 전에 접근하려고 하면 에러메세지가 뜬다. 해당 구간을 일시적 사각지대(TDZ)라고 한다.

#### 2. 중복 선언의 차이점

var는 같은 스코프 내에서도 중복 선언 가능.  
let, const는 같은 스코프 내에서 중복 선언 불가.

#### 3. 변수의 유효 범위(scope) 차이

var는 변수의 스코프가 함수 단위로만 구분된다. (함수 스코프)  
let, const는 코드 블록을 기준으로 스코프를 구분한다. (블록 스코프)

## var의 특징이 단점이 되는 이유

1. 선언 중복이 가능해서 의도치 않은 경우에도 변수값이 재할당될 수 있다.

2. 스코프의 범위가 전역 혹은 함수로만 제한된다. 함수 외의 코드블록에서 선언된 var 변수는 모두 전역변수로 평가된다.

3. 변수 선언 이전에 접근하면 에러 대신 undefined를 출력하여 잠재적 버그를 잡지 못한다.

## const의 특징

1. 재할당 금지
2. 재할당이 금지되어있기 때문에 반드시 선언과 동시에 초기화해야한다.
3. const에 원시값을 할당한 경우 변수값은 변경이 불가하다. (상수의 특징)

## var let const 변수 생성과정의 차이

변수 생성과정은 선언(호이스팅) -> 초기화(선언문 도달) -> 할당 순으로 이루어진다.

![valetconst](https://user-images.githubusercontent.com/87015026/223756856-2cd7470a-a3fd-4749-bec7-cb7405500efb.png)

- var는 선언만 하면 동시에 초기화(undefined)가 이루어진다.
- let은 모든 단계가 나누어서 진행될 수 있다.
- const는 반드시 선언과 동시에 초기화해야한다.

## TDZ (일시적 사각지대)

let, const 키워드로 선언된 변수는 스코프의 시작인 선언 단계 지점부터 초기화 시작까지의 구간에서  
변수를 참조할 수 없다. 해당 구간을 일시적 사각지대라고 부른다.

![tdz](https://user-images.githubusercontent.com/87015026/223740386-a7126096-9781-42bb-a93a-784c4df0e994.png)

```javascript
// 선언단계 (런타임 이전)
// 아직 변수가 초기화되지 않았다. 일시적 사각 지대에서는 변수 참조 불가.
console.log(foo) // ReferenceError: foo is not defined

let foo // 초기화 단계 (선언문 도달)
console.log(foo) // undefined

foo = 1 // 할당 단계 (할당문 도달)
console.log(foo) // 1
```
